<div class="tab-pane" *ngIf="data.length > 0">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12">
        <div class="row">
          <div class="col-md-1">
            <span class="select-all">
              <i *ngIf="isSelectedAll()" class="fa fa-fw fa-check-square-o" (click)="selectAll()"></i>
              <i *ngIf="isPartiallySelected() && !isSelectedAll()" class="fa fa-fw fa-minus-square-o"
                 (click)="selectAll()"></i>
              <i *ngIf="(!isPartiallySelected()) && (!isSelectedAll())" class="fa fa-fw fa-square-o"
                 (click)="selectAll()"></i>
              <i class="fa"
                 [ngClass]="isCollapseAll() ? 'fa-plus':'fa-minus'"
                 (click)="collapseAll()"
                 [title]="isCollapseAll() ? 'Expand All':'Collapse All'"></i>
            </span>
          </div>
          <div class="col-md-2">
            System
          </div>
          <div class="col" [class.highlightColumn]="isCurrentColumn(0)">Physical Subs</div>
          <div class="col" [class.highlightColumn]="isCurrentColumn(1)">Physical Capacity</div>
          <div class="col" [class.highlightColumn]="isCurrentColumn(2)">Available Capacity</div>
          <div class="col" [class.highlightColumn]="isCurrentColumn(3)">Logical Used</div>
          <div class="col" [class.highlightColumn]="isCurrentColumn(4)">Physical Used</div>
          <div class="col" [class.highlightColumn]="isCurrentColumn(5)">Compression Ratio</div>
        </div>
        <div class="system-header" *ngFor="let system of data;let i = index;">
          <div class="row" *ngIf="this.getSystemStatistics(system.name) == undefined"
               [class.collapsed]="isCollapsed(system.name)">
            <div class="col-md-3">{{ system.name }}</div>
            <div class="col-filler">
              <i class="fa expand-collapse pull-right"
                 [ngClass]="isCollapsed(system.name) ? 'fa-plus':'fa-minus'"
                 (click)="addCollapsed(system.name)" [title]="isCollapsed(system.name) ? 'Expand':'Collapse'">
              </i>
            </div>
          </div>
          <div class="row" *ngIf="this.getSystemStatistics(system.name) !== undefined"
               [class.collapsed]="isCollapsed(system.name)">
            <div class="col-md-3">{{ system.name }}</div>
            <div class="col">{{this.getSystemStatistics(system.name).physicalSubstitution.toFixed(2)}}</div>
            <div class="col">{{this.getSystemStatistics(system.name).physicalCapacity.toFixed(2)}}</div>
            <div class="col">{{this.getSystemStatistics(system.name).availableCapacity.toFixed(2)}}</div>
            <div class="col">{{this.getSystemStatistics(system.name).logicalUsed.toFixed(2)}}</div>
            <div class="col">{{this.getSystemStatistics(system.name).physicalUsed.toFixed(2)}}</div>
            <div class="col">{{this.getSystemStatistics(system.name).compressionRatio.toFixed(2)}}
              <i class="fa expand-collapse pull-right" [ngClass]="isCollapsed(system.name) ? 'fa-plus':'fa-minus'"
                 (click)="addCollapsed(system.name)"
                 [title]="isCollapsed(system.name) ? 'Expand':'Collapse'"></i>
            </div>
          </div>
          <div *ngFor="let pool of data[i].pools" class="row collapsable">
            <div class="col-md-1"><input type="checkbox" [name]="pool.name" [checked]="isSelectedPool(pool.name)"
                                         (click)="selectPool(pool.name, system.name)"></div>
            <div class="col-md-2">{{pool.name}}</div>
            <div [ngClass]="'col'" *ngFor="let metric of pool.metrics; let column=index;"
                 (mouseout)="setCurrentColumn(-1)"
                 (mouseover)="setCurrentColumn(column)"
                 [class.highlightColumn]="isCurrentColumn(column)">{{metric.value}} {{metric.unit}}
            </div>
          </div>
        </div>
        <div class="row sticky" *ngIf="this.getSystemStatistics('all') !== undefined">
          <div class="col-md-3"></div>
          <div class="col">{{this.getSystemStatistics('all').physicalSubstitution.toFixed(2)}}</div>
          <div class="col">{{this.getSystemStatistics('all').physicalCapacity.toFixed(2)}}</div>
          <div class="col">{{this.getSystemStatistics('all').availableCapacity.toFixed(2)}}</div>
          <div class="col">{{this.getSystemStatistics('all').logicalUsed.toFixed(2)}}</div>
          <div class="col">{{this.getSystemStatistics('all').physicalUsed.toFixed(2)}}</div>
          <div class="col">{{this.getSystemStatistics('all').compressionRatio.toFixed(2)}}</div>
        </div>
      </div>
    </div>
  </div>
</div>
